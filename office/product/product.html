<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>จัดการสินค้า • SneakerHub Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="./admin.css"/>
</head>
<body>
  <div class="container">
    <h1>จัดการสินค้า</h1>

    <!-- Toolbar -->
    <div class="card pad toolbar">
      <div class="left">
        <div class="search">
          <input id="q" type="search" placeholder="ค้นหา: รหัส/ชื่อ/แบรนด์/หมวดหมู่...">
          <i class="fa-solid fa-magnifying-glass"></i>
        </div>
        <select id="filter-category">
          <option value="">หมวดหมู่ทั้งหมด</option>
        </select>
        <select id="filter-brand">
          <option value="">แบรนด์ทั้งหมด</option>
        </select>
        <select id="filter-gender">
          <option value="">เพศทั้งหมด</option>
          <option value="men">ผู้ชาย</option>
          <option value="women">ผู้หญิง</option>
          <option value="unisex">Unisex</option>
        </select>
        <select id="filter-recommended">
          <option value="">ทั้งหมด</option>
          <option value="true">เฉพาะสินค้าแนะนำ</option>
          <option value="false">ยกเว้นสินค้าแนะนำ</option>
        </select>
      </div>
      <div class="right">
        <button class="btn-outline" id="refreshBtn"><i class="fa-solid fa-rotate"></i> รีเฟรช</button>
        <button class="btn" id="openAdd"><i class="fa-solid fa-plus"></i> เพิ่มสินค้า</button>
      </div>
    </div>

    <!-- Table -->
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>รูป</th>
            <th>รหัส</th>
            <th style="min-width:240px">ชื่อสินค้า</th>
            <th>ราคา</th>
            <th>จำนวน</th>
            <th>รุ่นยอดนิยม</th>
            <th>แนะนำ</th>
            <th style="min-width:180px">จัดการ</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <!-- Pager -->
    <div class="pager">
      <div class="info" id="info">กำลังโหลด…</div>
      <div class="right">
        <button class="btn-outline" id="prevBtn"><i class="fa-solid fa-chevron-left"></i></button>
        <button class="btn-outline" id="nextBtn"><i class="fa-solid fa-chevron-right"></i></button>
      </div>
    </div>
  </div>

  <!-- Add/Edit Modal -->
  <div class="modal" id="modal">
    <div class="panel">
      <div class="head">
        <strong id="modalTitle">เพิ่มสินค้า</strong>
        <button class="icon-btn" id="closeModal"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="body">
        <form id="formProduct" class="grid">
          <div class="input">
            <label>รหัสสินค้า (SKU)</label>
            <input name="product_id" required placeholder="เช่น SKU-001">
          </div>
          <div class="input">
            <label>ชื่อสินค้า</label>
            <input name="name" required>
          </div>

          <div class="input">
            <label>แบรนด์</label>
            <input name="brand" placeholder="เช่น Nike">
          </div>
          <div class="input">
            <label>หมวดหมู่</label>
            <input name="category" placeholder="เช่น Running">
          </div>

          <div class="input">
            <label>เพศ</label>
            <select name="gender">
              <option value="">(ไม่ระบุ)</option>
              <option value="men">ผู้ชาย</option>
              <option value="women">ผู้หญิง</option>
              <option value="unisex">Unisex</option>
            </select>
          </div>
          <div class="input">
            <label>จำนวน</label>
            <input name="quantity" type="number" min="0" required value="0">
          </div>

          <div class="input">
            <label>ราคาทุน</label>
            <input name="cost_price" type="number" step="0.01" min="0" required value="0">
          </div>
          <div class="input">
            <label>ราคาขาย</label>
            <input name="sell_price" type="number" step="0.01" min="0" required value="0">
          </div>

          <div class="input">
            <label>ราคาป้าย (เดิม)</label>
            <input name="original_price" type="number" step="0.01" min="0" placeholder="ไม่บังคับ">
          </div>
          <div class="input">
            <label>สถานะสินค้าแนะนำ</label>
            <select name="recommended">
              <option value="false">ไม่แนะนำ</option>
              <option value="true">แนะนำ</option>
            </select>
          </div>

          <div class="input full">
            <label>รูปภาพสินค้า (อัปโหลดหรือไม่ก็ได้)</label>
            <div style="display:flex;gap:12px;align-items:center">
              <img id="preview" class="preview" alt="">
              <div>
                <input name="image" type="file" accept="image/*">
                <div class="help">ถ้าไม่อัปโหลด ระบบจะคงรูปเดิมไว้</div>
              </div>
            </div>
          </div>

          <div class="full" style="display:flex;gap:10px;justify-content:flex-end;margin-top:6px">
            <button type="button" class="btn-outline" id="cancelModal">ยกเลิก</button>
            <button type="submit" class="btn" id="submitBtn">บันทึก</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ENV (กำหนด ENV.api) -->
  <script src="/account/env/env.js"></script>
  <!-- Logic หน้า Admin -->
  <script src="./admin.js"></script>
</body>
</html>
